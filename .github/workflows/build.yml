name: Build
on:
  push:
  pull_request:
jobs:
  build-ubuntu:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v6
      - name: Build
        run: make
  build-macos:
    runs-on: macos-latest
    steps:
      - uses: actions/checkout@v6
      - name: Build
        run: make
  build-windows:
    runs-on: windows-latest
    steps:
      - uses: actions/checkout@v6
      - name: Add MinGW to PATH
        run: echo "C:\msys64\mingw32\bin" >> $GITHUB_PATH
        shell: bash
      - name: Build
        run: make
        shell: bash
        env:
          CC: gcc
  build-freebsd:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        version: ['13.5', '14.3', '15.0']
    steps:
      - uses: actions/checkout@v6
      - name: Build in default configuration
        uses: cross-platform-actions/action@v0.32.0
        with:
          operating_system: freebsd
          architecture: x86-64
          version: ${{ matrix.version }}
          run: |
            sudo pkg update
            sudo pkg install -y gmake
            gmake
  build-openbsd:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v6
      - name: Build
        uses: cross-platform-actions/action@v0.32.0
        with:
          operating_system: openbsd
          architecture: x86-64
          version: '7.8'
          run: |
            sudo pkg_add gmake
            gmake
  build-netbsd:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        version: ['9.4', '10.1']
    steps:
      - uses: actions/checkout@v6
      - name: Build
        uses: cross-platform-actions/action@v0.32.0
        with:
          operating_system: netbsd
          architecture: x86-64
          version: ${{ matrix.version }}
          run: |
            sudo pkgin update
            sudo pkgin -y install gmake
            gmake
  build-haiku:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v6
      - name: Build
        uses: cross-platform-actions/action@v0.32.0
        with:
          operating_system: haiku
          architecture: x86-64
          version: r1beta5
          run: make
